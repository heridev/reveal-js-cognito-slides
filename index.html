<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title> De Semanas a Minutos - Simplificando la Autenticación para Startups utilizando AWS Cognitos</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/black.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white"> De Semanas a Minutos -</h3>
				<h4 style="text-transform: none; font-weight: 100; color: white">Simplificando la
					Autenticación
					para Startups
					utilizando
					<strong>AWS Cognito</strong>
				</h4>
				<img src="images/making-math.webp" alt="making the match"
					style="height: 200px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
			</section>

			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					Who's this guy?
				</h3>
				<img src="images/heriberto-profile.jpg"
					style="height: 200px; margin: 0 auto 1rem auto; background: transparent;" class="demo-logo">

				<h5 style="text-transform: none; font-weight: 100; color: white" class="fragment">
					Heriberto Pérez Magaña
				</h5>
				<p style=" font-size: 19px;" class="fragment">
					Full stack software engineer at Magmalabs.io
				</p>
				<p style="font-size: 28px;" class="fragment">
					full·stack /ˈfo͝olˌstak/
				</p>
				<p style="font-size: 19px;" class="fragment">
					noun: A developer species known for their inability <br /> to say "no" to customer requests
				</p>
				<p style="font-size: 19px;" class="fragment">
					See also: "I'm sure we can add that feature"
				</p>
			</section>
			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					So, you want to build authentication for your app? Let me guess - you're thinking 'I'll just write it myself,
					how hard can it be?
				</h3>
				<img src="images/im-in-hell.webp" style="height: 200px; margin: 0 auto 1rem auto; background: transparent;"
					class="demo-logo">
			</section>

			<section class="slide">
				<div class="section-box">
					<h3 style="
							margin-bottom: 0.5em;
							line-height: 1.2;
							color: #ffffff;
							font-weight: 600;
					">So, you want to build authentication for your app?</h3>

					<p style="
							line-height: 1.4;
							color: #e0e0e0;
							margin-bottom: 1em;
					">Let me guess - you're thinking "I'll just write it myself, how hard can it be?"</p>

					<img src="images/im-in-hell.webp" style="height: 200px; margin: 0 auto 1rem auto; background: transparent;">
				</div>
			</section>

			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					Authentication from scratch
				</h3>
			</section>
			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					1. Security Evolution Timeline
				</h3>
				<p style="font-size: 25px">Let's take a quick trip down memory lane of authentication security:</p>
				<ul style="font-size: 20px">
					<li style="text-decoration: line-through">Plain text passwords: "Because who needs security anyway?"</li>
					<li>MD5 hashing: "Slightly better, like using a paper lock"</li>
					<li>SHA-1: "The 'good enough' that wasn't good enough"</li>
					<li>Modern bcrypt/Argon2: "Finally, something hackers actually have to work for"</li>
				</ul>
			</section>

			<section>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					2. The Traditional Approach Pain Points
				</h3>
				<ul style="font-size: 20px">
					<li>When we realized our password reset tokens never expired</li>
					<li>That exciting moment when we found out JWT tokens aren't meant for sessions</li>
					<li>Custom authentication implementations: The gift that keeps on giving... headaches</li>
				</ul>
			</section>


			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					3. What typically happens when building authentication from scratch:
				</h3>
			</section>

			<section data-auto-animate>
				<h2 style="text-transform: none" data-id="code-title">Day 1</h2>
				<p style="font-size: 28px">Python</p>
				<pre data-id="code-animation">
						<code class="hljs python" data-trim data-line-numbers>
							# Python Example
							async def authenticate(username: str, password: str):
									return await database.find_user(username, password)
					</code>
				</pre>
			</section>

			<section data-auto-animate>
				<h2 style="text-transform: none" data-id="code-title">Day 30</h2>
				<pre data-id="code-animation">
					<code class="hljs python" data-trim data-line-numbers>
						# Day 30: Reality hits
						async def authenticate(
								username: str,
								password: str,
								device_id: str = None,
								mfa_token: str = None,
								social_provider: str = None,
								refresh_token: str = None,
								client_id: str = None,
								ip_address: str = None,
								user_agent: str = None,
								remember_me: bool = False,
								session_duration: int = None,
								login_attempt: int = 0,
								geolocation: dict = None,
								risk_score: float = None,
								recovery_code: str = None,
								# ... and more parameters
						):
								# Validate input parameters
								if not username or not password:
										raise AuthenticationError("Missing credentials")
								
								# Check rate limiting
								if await is_rate_limited(ip_address):
										raise RateLimitError("Too many attempts")
								
								# Handle social authentication
								if social_provider:
										return await handle_social_auth(social_provider, client_id)
								
								# Verify device trust
								if device_id and not await is_trusted_device(device_id):
										await send_device_verification(username)
										raise DeviceVerificationRequired()
								
								# Basic authentication
								user = await database.find_user_by_username(username)
								if not user or not verify_password(password, user.password_hash):
										await log_failed_attempt(username, ip_address)
										raise InvalidCredentials()
								
								# Check MFA if enabled
								if user.mfa_enabled:
										if not mfa_token:
												raise MFARequired()
										if not await verify_mfa(user.id, mfa_token):
												raise InvalidMFAToken()
								
								# Generate session
								session = await create_session(
										user_id=user.id,
										device_id=device_id,
										ip_address=ip_address,
										user_agent=user_agent,
										duration=session_duration
								)
								
								# Return tokens
								return {
										'access_token': generate_jwt(session),
										'refresh_token': refresh_token or generate_refresh_token(),
										'user': user.to_dict()
								}
					</code>
				</pre>
			</section>

			<section data-auto-animate>
				<h2 style="text-transform: none" data-id="code-title">Day 1</h2>
				<p style="font-size: 28px">Ruby</p>
				<pre data-id="code-animation">
						<code class="hljs ruby" data-trim data-line-numbers>
						def authenticate(username, password)
							User.find_by(username: username, password: password)
						end
					</code>
				</pre>
			</section>

			<section data-auto-animate>
				<h2 style="text-transform: none" data-id="code-title">Day 30</h2>
				<pre data-id="code-animation">
					<code class="hljs ruby" data-trim data-line-numbers>
						# Day 30: Reality hits
						def authenticate(
							username:,
							password:,
							device_id: nil,
							mfa_token: nil,
							social_provider: nil,
							refresh_token: nil,
							client_id: nil,
							ip_address: nil,
							user_agent: nil,
							remember_me: false,
							session_duration: nil,
							login_attempt: 0,
							geolocation: nil,
							risk_score: nil,
							recovery_code: nil,
							**additional_params
						)
							# Input validation
							raise AuthenticationError, "Missing credentials" if username.blank? || password.blank?
							
							# Rate limiting
							if rate_limited?(ip_address)
								Rails.logger.warn("Rate limit exceeded for IP: #{ip_address}")
								raise RateLimitError, "Too many attempts"
							end
							
							# Social auth handling
							if social_provider.present?
								return handle_social_auth(provider: social_provider, client_id: client_id)
							end
							
							# Device verification
							if device_id.present? && !trusted_device?(device_id)
								DeviceVerificationMailer.send_verification(username).deliver_later
								raise DeviceVerificationRequired
							end
							
							# Find and authenticate user
							user = User.find_by(username: username)
							unless user&.authenticate(password)
								log_failed_attempt(username, ip_address)
								raise InvalidCredentials
							end
							
							# MFA verification
							if user.mfa_enabled?
								raise MFARequired if mfa_token.blank?
								raise InvalidMFAToken unless verify_mfa(user.id, mfa_token)
							end
							
							# Create session
							session = Session.create!(
								user: user,
								device_id: device_id,
								ip_address: ip_address,
								user_agent: user_agent,
								expires_at: session_duration&.hours&.from_now || 24.hours.from_now
							)
							
							# Return authentication result
							{
								access_token: JWT.encode(session.to_jwt, Rails.application.secrets.jwt_secret),
								refresh_token: refresh_token || generate_refresh_token,
								user: user.as_json(except: [:password_digest])
							}
						end
					</code>
				</pre>
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					Notice how it evolved from "just a login" to ...
				</h3>
				<img src="images/dog-no-idea-doing.webp" alt="making the match"
					style="height: 200px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					Modern Authentication Requirements
				</h3>
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white">
					SSO with social providers
				</h3>

				<p style="font-size: 29px">
					"Because nobody remembers passwords anymore, we just trust Google with our digital lives"
				</p>

				<div>
					<img src="images/google-analytics-concerned.webp" style="height: 150px;">
				</div>
			</section>

			<section data-auto-animate>
				<h3 style=" text-transform: none; font-weight: 100; color: white; margin-bottom: 0px">
					Bearer tokens
				</h3>

				<p style="font-size: 29px; margin: 0; padding: 0;">
					"JWT: Just Want Tokens, am I right?"
				</p>

				<p style="font-size: 23px; margin-top: 40px">
					<strong>Token Lifecycle:</strong>
				</p>

				<ul style="font-size: 20px">
					<li>Access Token: "Your VIP pass that expires way too quickly"</li>
					<li>Refresh Token: "The token that gets you new tokens"</li>
					<li>ID Token: "Because one token wasn't complicated enough"</li>
				</ul>
			</section>

			<section data-auto-animate>

				<h3 style="text-transform: none; font-weight: 100; color: white; margin-bottom: 0px">
					MFA
				</h3>

				<p style="font-size: 29px; margin: 0; padding: 0;">
					When one password isn't enough to lose
				</p>

				<p style="font-size: 23px; margin-top: 40px">
					<strong>MFA Options:</strong>
				</p>

				<ul style="font-size: 20px">
					<li>Time-based OTP (TOTP)</li>
					<li>SMS-based verification</li>
					<li>Email codes</li>
					<li>Biometric authentication</li>
					<li>Hardware security keys</li>
				</ul>
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white; margin-bottom: 0px">
					Email workflows
				</h3>

				<p style="font-size: 29px; margin: 0; padding: 0;">
					"The art of hoping your emails don't end up in SPAM..."
				</p>
				<p style=" font-size: 23px; margin-top: 40px">
					<strong>The email flows you need to handle:</strong>
				</p>

				<ul style="font-size: 20px">
					<li>Verification</li>
					<li>Password Reset</li>
					<li>Email codes</li>
					<li>MFA Operations</li>
					<li>Account Notifications</li>
				</ul>
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-weight: 100; color: white; margin-bottom: 0px">
					HIPAA compliance
				</h3>

				<p style="font-size: 29px; margin: 0; padding: 0;">
					" Because regular compliance wasn't challenging enough"
				</p>
				<p style=" font-size: 23px; margin-top: 40px">
					<strong>Key Requirements:</strong>
				</p>

				<ul style="font-size: 20px">
					<li>Encryption at rest</li>
					<li>Encryption in transit</li>
					<li>Access controls</li>
					<li>Audit logging</li>
					<li>Business Associate Agreements (BAAs)</li>
				</ul>
			</section>

			<section data-auto-animate>
				<h3 style="text-transform: none; font-size: 40px; font-weight: 100; color: white;">
					"Fun fact: AWS Cognito is HIPAA eligible, which means one less thing to worry about in your compliance
				</h3>

				<p style="font-size: 29px; margin: 0; padding: 0;">
					And trust me, that checklist is longer than a Soriana/Walmart ticket
				</p>
				<img src="images/papiro-largo.webp" style="height: 200px;">
			</section>

		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>
